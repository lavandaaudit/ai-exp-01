<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>IBONARIUM · SOLAR TENSION · EXP</title>

<!--
IBONARIUM · SOLAR TENSION
Довготривалий експеримент

МЕТА:
Перевірити, чи може реальне Сонце впливати
на сприйняття цифрового простору,
не будучи показаним напряму.

ПОЧАТОК: зараз
КОНТРОЛЬНА ДАТА: 13 грудня

ДАНІ:
NOAA / SWPC
Solar Wind
X-ray Flux
F10.7 Index

ПРАВИЛО:
Жодних чисел.
Жодних пояснень.
Лише вплив.
-->

<style>
html,body{
  margin:0;
  width:100%;
  height:100%;
  background:#04060a;
  overflow:hidden;
  font-family: monospace;
  color:#9fb3ff;
}

/* ПОЛЕ */
#field{
  position:absolute;
  inset:0;
  background:
    radial-gradient(circle at 25% 50%, rgba(60,90,140,0.15), transparent 65%),
    radial-gradient(circle at 75% 50%, rgba(140,60,100,0.12), transparent 65%);
  transition: filter 2s linear;
}

/* ПРИЧИНА */
#cause{
  position:absolute;
  left:0;
  top:0;
  width:38vw;
  height:100vh;
  padding:24px;
  box-sizing:border-box;
}

.line{
  height:1px;
  margin:22px 0;
  background:linear-gradient(90deg, transparent, #7aa2ff, transparent);
  transform-origin:left;
  opacity:0.6;
}

/* НАСЛІДОК */
#effect{
  position:absolute;
  right:0;
  top:0;
  width:62vw;
  height:100vh;
}

canvas{
  width:100%;
  height:100%;
  display:block;
}

/* ПІДПИС */
#signature{
  position:absolute;
  bottom:10px;
  left:20px;
  font-size:11px;
  opacity:0.35;
  letter-spacing:1px;
}
</style>
</head>

<body>

<div id="field"></div>

<div id="cause">
  <div class="line"></div>
  <div class="line"></div>
  <div class="line"></div>
  <div class="line"></div>
  <div class="line"></div>
</div>

<div id="effect">
  <canvas id="cosmos"></canvas>
</div>

<div id="signature">
IBONARIUM · SOLAR TENSION · Observation until 13 December
</div>

<script>
/* CANVAS */
const canvas = document.getElementById("cosmos");
const ctx = canvas.getContext("2d");
let w,h;
function resize(){
  w = canvas.width = canvas.clientWidth;
  h = canvas.height = canvas.clientHeight;
}
window.addEventListener("resize",resize);
resize();

/* СТАН СОНЦЯ */
let solar = {
  wind: 320,
  xray: 1,
  f107: 75
};

/* ЧАСТИНКИ */
const parts=[];
for(let i=0;i<420;i++){
  parts.push({
    a: Math.random()*Math.PI*2,
    r: Math.random()*220+30,
    v: Math.random()*0.25+0.04
  });
}

let time=0;

/* ВІЗУАЛЬНА СУТНІСТЬ */
function render(){
  time += 0.002*(1+solar.xray);

  ctx.fillStyle="rgba(4,6,10,0.18)";
  ctx.fillRect(0,0,w,h);

  ctx.save();
  ctx.translate(w/2,h/2);

  parts.forEach(p=>{
    p.a += p.v*(solar.wind/450);
    const rr = p.r*(1+solar.xray*0.2);
    const x = Math.cos(p.a+time)*rr;
    const y = Math.sin(p.a+time)*rr;

    ctx.fillStyle = `rgba(${100+solar.f107},${70},${180},0.65)`;
    ctx.fillRect(x,y,1.6,1.6);
  });

  ctx.restore();
  requestAnimationFrame(render);
}
render();

/* ДЕФОРМАЦІЯ ПОЛЯ */
const lines = document.querySelectorAll(".line");
function deform(){
  lines.forEach(l=>{
    const scale = 1 + (solar.wind/900) + solar.xray*0.35;
    const rot = (solar.f107-70)/18;
    l.style.transform = `scaleX(${scale}) rotate(${rot}deg)`;
  });

  document.getElementById("field").style.filter =
    `blur(${solar.xray*2.2}px)`;
}
setInterval(deform,3000);

/* NOAA DATA */
/* Сонячний вітер */
fetch("https://services.swpc.noaa.gov/products/solar-wind/plasma-7-day.json")
.then(r=>r.json())
.then(d=>{
  const last=d[d.length-1];
  solar.wind=parseFloat(last[2])||solar.wind;
});

/* X-ray */
fetch("https://services.swpc.noaa.gov/json/goes/primary/xrays-1-day.json")
.then(r=>r.json())
.then(d=>{
  const last=d[d.length-1];
  solar.xray=Math.min(parseFloat(last.flux)||1,5);
});

/* F10.7 */
fetch("https://services.swpc.noaa.gov/json/f107_cm_flux.json")
.then(r=>r.json())
.then(d=>{
  const last=d[d.length-1];
  solar.f107=parseFloat(last.flux)||solar.f107;
});
</script>

</body>
</html>
